(function(){$(document).ready(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return b="todo",o=0,k=["minor","major","blocker"],c=["today","tomorrow","this week","next week","this month"],h=function(){var a;return a=e(),n(a),$("#new-task").focus()},e=function(){var a;return a=localStorage.getItem(b),a=JSON.parse(a)||[{isDone:!1,name:"Add a new task above",priority:"major",duedate:"today"},{isDone:!1,name:"Refresh and see your task is still here",priority:"minor",duedate:"today"},{isDone:!1,name:"Click a task to complete it",priority:"minor",duedate:"tomorrow"},{isDone:!1,name:"Follow <a href='http://twitter.com/humphreybc' target='_blank'>@humphreybc</a> on Twitter",priority:"major",duedate:"today"}]},m=function(){var a,b,c;return b=$("#new-task").val(),""!==b?(c=Task.createTask(b),a=e(),a.push(c),l(a)):void 0},r=function(a,b,c){var d,g,h;return g=f(a),d=e(),h=d[g],h[b]=c,l(d)},l=function(a){return localStorage.setItem(b,JSON.stringify(a)),n(a),$("#new-task").val("")},f=function(a){var b;return b=$(a).find("input").attr("id").replace("task",""),parseInt(b)},j=function(a){var b,c;return b=e(),c=b[a],c.position=a,localStorage.setItem("undo",JSON.stringify(c)),$("#undo").fadeIn(150),o=setTimeout(function(){return $("#undo").fadeOut(250),localStorage.removeItem("undo")},5e3),b=e(),b.splice(a,1),l(b)},i=function(){return l([])},g=function(a){var b,c,d,e;for(b=[],d=0,e=a.length;e>d;d++)c=a[d],b.push(c.name);return b},d=function(a){var b,c,d,e,f;for(b=[],c=e=0,f=a.length;f>e;c=++e)d=a[c],b[c]='<li><label><input type="checkbox" id="task'+c+'" />'+d.name+'</label><a class="duedate" type="duedate" duedate="'+d.duedate+'">'+d.duedate+'</a><a class="priority" type="priority" priority="'+d.priority+'">'+d.priority+"</a></li>";return b},n=function(a){var b;return b=d(a),$("#task-list").html(b)},p=function(){var a,b,c;return c=localStorage.getItem("undo"),c=JSON.parse(c),a=e(),b=c.position,delete c.position,a.splice(b,0,c),l(a),localStorage.removeItem("undo"),q(a)},q=function(a){return n(a),clearTimeout(o),$("#undo").hide()},h(),$("#task-submit").click(function(a){return a.preventDefault(),m()}),$("#mark-all-done").click(function(a){return a.preventDefault(),confirm("Are you sure you want to mark all tasks as done?")?i():void 0}),$("#undo").click(function(){return p()}),$(document).on("click","#task-list li label input",function(){var a;return a=$(this).closest("li"),$(a).fadeOut(500,function(){return j(f(a))})}),$(document).on("click",".priority, .duedate",function(b){var c,d,e;return d=$(b.currentTarget).attr("type"),e=$(this).attr(d),c=$(this).closest("li"),a(c,d,e)}),a=function(a,b,d){var e,f;return"priority"===b?e=k:"duedate"===b&&(e=c),f=$.inArray(d,e),f===e.length-1&&(f=-1),d=e[f+1],r(a,b,d)}})}).call(this),function(){var a;a=function(){function a(){}return a.createTask=function(a){var b;return b={isDone:!1,name:a,priority:"minor",duedate:"today"}},a}()}.call(this);