(function(){$(document).ready(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;return a={},m=0,g=function(){var a;return a=d(),l(a),$("#new-todo").focus()},b=function(a){var b;return b={isDone:!1,name:a}},d=function(){var a;return a=localStorage.getItem("todo"),a=JSON.parse(a)||[{isDone:!1,name:"Add a new task above"},{isDone:!1,name:"Refresh and see your task is still here"},{isDone:!1,name:"Click a task to complete it"},{isDone:!1,name:"Follow <a href='http://twitter.com/humphreybc' target='_blank'>@humphreybc</a> on Twitter"}]},k=function(){var a,c,e;return c=$("#new-todo").val(),""!==c?(e=b(c),a=d(),a.push(e),j(a)):void 0},j=function(a){return localStorage.setItem("todo",JSON.stringify(a)),l(a),$("#new-todo").val("")},e=function(a){var b;return b=$(a).find("input").attr("id").replace("todo",""),parseInt(b)},i=function(a){var b,c;return b=d(),c=b[a],c.position=a,localStorage.setItem("undo",JSON.stringify(c)),$("#undo").fadeIn(150),m=setTimeout(function(){return $("#undo").fadeOut(250),localStorage.removeItem("undo")},5e3),b=d(),b.splice(a,1),j(b)},h=function(){return j([])},f=function(a){var b,c,d,e;for(b=[],d=0,e=a.length;e>d;d++)c=a[d],b.push(c.name);return b},c=function(a){var b,c,d,e,g;for(d=f(a),b=e=0,g=d.length;g>e;b=++e)c=d[b],d[b]='<li><label><input type="checkbox" id="todo'+b+'" />'+c+"</label></li>";return d},l=function(a){var b;return b=c(a),$("#todo-list").html(b)},n=function(){var a,b,c;return c=localStorage.getItem("undo"),c=JSON.parse(c),a=d(),b=c.position,delete c.position,a.splice(b,0,c),j(a),localStorage.removeItem("undo"),o(a)},o=function(a){return l(a),clearTimeout(m),$("#undo").hide()},g(),$("#todo-submit").click(function(a){return a.preventDefault(),k()}),$("#mark-all-done").click(function(a){return a.preventDefault(),confirm("Are you sure you want to mark all tasks as done?")?h():void 0}),$("#undo").click(function(){return n()}),$(document).on("click","#todo-list li",function(a){var b;return a.stopPropagation(),b=this,$(b).fadeOut(500,function(){return i(e(b))})})})}).call(this);