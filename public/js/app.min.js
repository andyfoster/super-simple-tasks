(function(){$(document).ready(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;return m=0,i=["minor","major","blocker"],f=function(){var a;return a=c(),l(a),$("#new-todo").focus()},a=function(a){var b;return b={isDone:!1,name:a}},c=function(){var a;return a=localStorage.getItem("todo"),a=JSON.parse(a)||[{isDone:!1,name:"Add a new task above"},{isDone:!1,name:"Refresh and see your task is still here"},{isDone:!1,name:"Click a task to complete it"},{isDone:!1,name:"Follow <a href='http://twitter.com/humphreybc' target='_blank'>@humphreybc</a> on Twitter"}]},k=function(){var b,d,e;return d=$("#new-todo").val(),""!==d?(e=a(d),b=c(),b.push(e),j(b)):void 0},j=function(a){return localStorage.setItem("todo",JSON.stringify(a)),l(a),$("#new-todo").val("")},d=function(a){var b;return b=$(a).find("input").attr("id").replace("todo",""),parseInt(b)},h=function(a){var b,d;return b=c(),d=b[a],d.position=a,localStorage.setItem("undo",JSON.stringify(d)),$("#undo").fadeIn(150),m=setTimeout(function(){return $("#undo").fadeOut(250),localStorage.removeItem("undo")},5e3),b=c(),b.splice(a,1),j(b)},g=function(){return j([])},e=function(a){var b,c,d,e;for(b=[],d=0,e=a.length;e>d;d++)c=a[d],b.push(c.name);return b},b=function(a){var b,c,d,f,g;for(d=e(a),b=f=0,g=d.length;g>f;b=++f)c=d[b],d[b]='<li><label><input type="checkbox" id="todo'+b+'" />'+c+'</label><a class="priority" priority="minor">minor</a></li>';return d},l=function(a){var c;return c=b(a),$("#todo-list").html(c)},n=function(){var a,b,d;return d=localStorage.getItem("undo"),d=JSON.parse(d),a=c(),b=d.position,delete d.position,a.splice(b,0,d),j(a),localStorage.removeItem("undo"),o(a)},o=function(a){return l(a),clearTimeout(m),$("#undo").hide()},f(),$("#todo-submit").click(function(a){return a.preventDefault(),k()}),$("#mark-all-done").click(function(a){return a.preventDefault(),confirm("Are you sure you want to mark all tasks as done?")?g():void 0}),$("#undo").click(function(){return n()}),$(document).on("click","#todo-list li label input",function(){var a;return a=$(this).closest("li"),$(a).fadeOut(500,function(){return h(d(a))})}),$(document).on("click",".priority",function(){var a,b,c;return c=$(this),b=c.attr("priority"),a=$.inArray(b,i),a===i.length-1&&(a=-1),b=i[a+1],c.attr("priority",b),c.text(b)})})}).call(this);